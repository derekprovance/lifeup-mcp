{
  "openapi": "3.0.0",
  "info": {
    "title": "LifeUp Cloud HTTP API",
    "description": "LifeUp Cloud turns your mobile phone into an HTTP server to expose LifeUp APIs via Ktor.\nThis API allows you to interact with LifeUp from other devices (computers, servers, etc.)\non the same Local Area Network (LAN).\n\n## Features:\n- URL Scheme execution via HTTP (lifeup:// protocol wrapper)\n- Content Provider API calls for direct data queries\n- Querying tasks, items, skills, achievements, feelings, synthesis recipes, and pomodoro records\n- File upload and download\n- Data export and import (backup/restore)\n- Wake lock management and mDNS service registration\n\n## Implementation Details:\n- Built with Ktor embedded server (Netty backend)\n- Supports both GET and POST requests\n- CORS support (configurable via Settings.getInstance().enableCors)\n- API token validation (optional, via Settings.getInstance().apiToken)\n- Automatic port fallback on binding errors (range: 8080-65535)\n- Wake lock management to prevent device sleep during requests\n- mDNS service registration for LAN discovery\n\n## Response Code Reference:\n- **200**: Success - request completed successfully\n- **401**: Unauthorized - invalid API token\n- **500**: Server error - general server-side error\n- **10002**: Content Provider error - underlying Android ContentProvider returned an error (see message field for details)\n\n### Content Provider Errors\nWhen a Content Provider query fails (e.g., endpoint not implemented by current LifeUp version), the response will have `code: 10002` with a message like:\n```\n\"content provider error_code: 404, Not Found: content://net.sarasarasa.lifeup.provider.api/achievements\"\n```\nThis typically indicates: feature not available in current LifeUp version, ContentProvider not properly configured, or data table doesn't exist.\n\n## Request Examples:\n\n### GET Request (URL Scheme):\n```\nGET http://192.168.1.100:8080/api?url=lifeup%3A%2F%2Fapi%2Freward%3Ftype%3Dcoin%26content%3DTest%26number%3D100\n```\n\n### POST Request (URL Scheme):\n```\nPOST http://192.168.1.100:8080/api\nContent-Type: application/json\n\n{\n  \"url\": \"lifeup://api/reward?type=coin&content=Test&number=100\"\n}\n```\n\n### POST Request (Multiple URLs):\n```\nPOST http://192.168.1.100:8080/api\nContent-Type: application/json\n\n{\n  \"urls\": [\n    \"lifeup://api/reward?type=coin&content=Test1&number=100\",\n    \"lifeup://api/reward?type=coin&content=Test2&number=50\"\n  ]\n}\n```\n\nOfficial Repository: https://github.com/Ayagikei/LifeUp-SDK\nOfficial Documentation: https://docs.lifeupapp.fun/en/#/guide/api\n",
    "version": "2.0.1",
    "contact": {
      "name": "LifeUp SDK",
      "url": "https://github.com/Ayagikei/LifeUp-SDK"
    },
    "license": {
      "name": "Apache 2.0",
      "url": "https://github.com/Ayagikei/LifeUp-SDK/blob/main/LICENSE"
    }
  },
  "servers": [
    {
      "url": "http://{host}:{port}",
      "description": "Local LifeUp HTTP Server (auto-discovered via mDNS)",
      "variables": {
        "host": {
          "default": "localhost",
          "description": "IP address or hostname of the device running LifeUp"
        },
        "port": {
          "default": "8080",
          "description": "HTTP server port (auto-increments if port is busy)"
        }
      }
    }
  ],
  "security": [
    {
      "ApiTokenAuth": []
    }
  ],
  "tags": [
    {
      "name": "Home",
      "description": "Root endpoint and server information"
    },
    {
      "name": "API Gateway",
      "description": "Generic API URL scheme execution via HTTP wrapper"
    },
    {
      "name": "Tasks & History",
      "description": "Query task and task history data via Content Provider"
    },
    {
      "name": "Items & Shop",
      "description": "Query shop items and item categories via Content Provider"
    },
    {
      "name": "Skills",
      "description": "Query skill information via Content Provider"
    },
    {
      "name": "Achievements",
      "description": "Query achievement data and categories via Content Provider"
    },
    {
      "name": "Feelings",
      "description": "Query feelings/emotions log via Content Provider"
    },
    {
      "name": "Synthesis & Crafting",
      "description": "Query synthesis/crafting recipe and category data via Content Provider"
    },
    {
      "name": "Pomodoro",
      "description": "Query pomodoro timer records via Content Provider"
    },
    {
      "name": "Data Management",
      "description": "Export and import backup data"
    },
    {
      "name": "Files",
      "description": "File upload and download endpoints"
    },
    {
      "name": "Info",
      "description": "General information endpoints"
    }
  ],
  "paths": {
    "/": {
      "get": {
        "tags": [
          "Home"
        ],
        "summary": "Server welcome page",
        "description": "Returns an HTML page with server information and API usage examples",
        "operationId": "getHomePage",
        "security": [],
        "responses": {
          "200": {
            "description": "Welcome page with API documentation",
            "content": {
              "text/html": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/api": {
      "get": {
        "tags": [
          "API Gateway"
        ],
        "summary": "Execute URL Scheme (GET)",
        "description": "Execute a LifeUp URL scheme command passed as a query parameter.\nThis is a wrapper around the lifeup:// protocol that allows HTTP GET requests.\n\nThe URL parameter should be URL-encoded.\n\n**Example lifeup:// URLs:**\n- `lifeup://api/reward?type=coin&content=API%20Test&number=100`\n- `lifeup://api/task?name=New%20Task&exp=50&coin=25`\n",
        "operationId": "executeUrlSchemeGet",
        "parameters": [
          {
            "name": "url",
            "in": "query",
            "required": true,
            "description": "URL-encoded lifeup:// scheme URL to execute",
            "schema": {
              "type": "string"
            },
            "example": "lifeup%3A%2F%2Fapi%2Freward%3Ftype%3Dcoin%26content%3DAPI%20Test%26number%3D100"
          }
        ],
        "responses": {
          "200": {
            "description": "URL scheme executed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "API Gateway"
        ],
        "summary": "Execute URL Scheme (POST)",
        "description": "Execute one or more LifeUp URL scheme commands via POST request with JSON body.\nSupports both single and multiple URL execution.\n",
        "operationId": "executeUrlSchemePost",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "oneOf": [
                  {
                    "$ref": "#/components/schemas/RawQueryVoSingleUrl"
                  },
                  {
                    "$ref": "#/components/schemas/RawQueryVoMultipleUrls"
                  }
                ]
              },
              "examples": {
                "singleUrl": {
                  "value": {
                    "url": "lifeup://api/reward?type=coin&content=Test&number=100"
                  }
                },
                "multipleUrls": {
                  "value": {
                    "urls": [
                      "lifeup://api/reward?type=coin&content=Test1&number=100",
                      "lifeup://api/reward?type=coin&content=Test2&number=50"
                    ]
                  }
                },
                "bothUrlsProvided": {
                  "value": {
                    "url": "lifeup://api/reward?type=coin&content=Test1&number=100",
                    "urls": [
                      "lifeup://api/reward?type=coin&content=Test2&number=50"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "URL scheme(s) executed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/api/contentprovider": {
      "get": {
        "tags": [
          "API Gateway"
        ],
        "summary": "Query via Content Provider (GET)",
        "description": "Query LifeUp data directly using Content Provider API with URL-encoded query.\nReturns structured JSON data instead of executing URL schemes.\n",
        "operationId": "queryContentProviderGet",
        "parameters": [
          {
            "name": "url",
            "in": "query",
            "required": true,
            "description": "URL-encoded Content Provider query URL",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Query executed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      },
      "post": {
        "tags": [
          "API Gateway"
        ],
        "summary": "Query via Content Provider (POST)",
        "description": "Query LifeUp data directly using Content Provider API via POST.\nSupports single and multiple queries.\n",
        "operationId": "queryContentProviderPost",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "oneOf": [
                  {
                    "$ref": "#/components/schemas/RawQueryVoSingleUrl"
                  },
                  {
                    "$ref": "#/components/schemas/RawQueryVoMultipleUrls"
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Query executed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "integer"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/CallUrlResult"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/tasks": {
      "get": {
        "tags": [
          "Tasks & History"
        ],
        "summary": "Get all tasks",
        "description": "Retrieve all tasks from LifeUp.\nUses Content Provider API for efficient data retrieval.\n",
        "operationId": "getAllTasks",
        "responses": {
          "200": {
            "description": "Tasks retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/tasks/{id}": {
      "get": {
        "tags": [
          "Tasks & History"
        ],
        "summary": "Get tasks in a specific category",
        "description": "Retrieve all tasks in a specific category.\nPass the category ID as path parameter.\n",
        "operationId": "getTasksByCategory",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Category ID (long)",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tasks retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/history": {
      "get": {
        "tags": [
          "Tasks & History"
        ],
        "summary": "Get task history/completion records",
        "description": "Retrieve task completion history with pagination and optional filtering.\nSupports pagination via offset/limit and filtering by group ID.\n",
        "operationId": "getTaskHistory",
        "parameters": [
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "description": "Number of records to skip",
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "description": "Maximum number of records to return",
            "schema": {
              "type": "integer",
              "default": 100
            }
          },
          {
            "name": "gid",
            "in": "query",
            "required": false,
            "description": "Filter by group ID (optional)",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "History retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/tasks_categories": {
      "get": {
        "tags": [
          "Tasks & History"
        ],
        "summary": "Get task categories",
        "description": "Retrieve all task category definitions",
        "operationId": "getTaskCategories",
        "responses": {
          "200": {
            "description": "Categories retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/items": {
      "get": {
        "tags": [
          "Items & Shop"
        ],
        "summary": "Get shop items",
        "description": "Retrieve shop items, optionally filtered by specific IDs or list ID.\nCan query multiple items by providing `id` query parameters multiple times.\n",
        "operationId": "getShopItems",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "required": false,
            "description": "Item ID or List ID (can be specified multiple times for multiple IDs)",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Items retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/items/{listId}": {
      "get": {
        "tags": [
          "Items & Shop"
        ],
        "summary": "Get items in a specific list",
        "description": "Retrieve all shop items in a specific list",
        "operationId": "getItemsByListId",
        "parameters": [
          {
            "name": "listId",
            "in": "path",
            "required": true,
            "description": "List ID (long)",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Items retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/items_categories": {
      "get": {
        "tags": [
          "Items & Shop"
        ],
        "summary": "Get item categories",
        "description": "Retrieve all shop item category definitions",
        "operationId": "getItemCategories",
        "responses": {
          "200": {
            "description": "Categories retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/skills": {
      "get": {
        "tags": [
          "Skills"
        ],
        "summary": "Get all skills",
        "description": "Retrieve all skills and their details",
        "operationId": "getAllSkills",
        "responses": {
          "200": {
            "description": "Skills retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/achievements": {
      "get": {
        "tags": [
          "Achievements"
        ],
        "summary": "Get all achievements",
        "description": "Retrieve all achievements. **Note:** This endpoint may return error code 10002 with message \"content provider error_code: 404, Not Found\" in some LifeUp versions. This indicates the achievements ContentProvider is not accessible. The `/achievement_categories` endpoint should work correctly.",
        "operationId": "getAllAchievements",
        "responses": {
          "200": {
            "description": "Achievements retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Content Provider error - achievement data not accessible",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                },
                "example": {
                  "code": 10002,
                  "message": "content provider error_code: 404, Not Found: content://net.sarasarasa.lifeup.provider.api/achievements",
                  "data": null
                }
              }
            }
          }
        }
      }
    },
    "/achievements/{id}": {
      "get": {
        "tags": [
          "Achievements"
        ],
        "summary": "Get achievements in a category",
        "description": "Retrieve achievements for a specific category. **Note:** This endpoint may return error code 10002 in some LifeUp versions indicating the achievements ContentProvider is not accessible.",
        "operationId": "getAchievementsByCategory",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Category ID (long)",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Achievements retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Content Provider error - achievement data not accessible",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                },
                "example": {
                  "code": 10002,
                  "message": "content provider error_code: 404, Not Found: content://net.sarasarasa.lifeup.provider.api/achievements",
                  "data": null
                }
              }
            }
          }
        }
      }
    },
    "/achievement_categories": {
      "get": {
        "tags": [
          "Achievements"
        ],
        "summary": "Get achievement categories",
        "description": "Retrieve all achievement category definitions",
        "operationId": "getAchievementCategories",
        "responses": {
          "200": {
            "description": "Categories retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/feelings": {
      "get": {
        "tags": [
          "Feelings"
        ],
        "summary": "Get feelings/emotions log",
        "description": "Retrieve the feelings/emotions log with pagination support.\n",
        "operationId": "getFeelings",
        "parameters": [
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "description": "Number of records to skip",
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "description": "Maximum number of records to return",
            "schema": {
              "type": "integer",
              "default": 100
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Feelings retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/synthesis": {
      "get": {
        "tags": [
          "Synthesis & Crafting"
        ],
        "summary": "Get all synthesis recipes",
        "description": "Retrieve all synthesis/crafting recipes",
        "operationId": "getAllSynthesis",
        "responses": {
          "200": {
            "description": "Synthesis recipes retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/synthesis/{id}": {
      "get": {
        "tags": [
          "Synthesis & Crafting"
        ],
        "summary": "Get synthesis recipes in a category",
        "description": "Retrieve synthesis recipes for a specific category",
        "operationId": "getSynthesisByCategory",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Category ID (long)",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Synthesis recipes retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/synthesis_categories": {
      "get": {
        "tags": [
          "Synthesis & Crafting"
        ],
        "summary": "Get synthesis categories",
        "description": "Retrieve all synthesis category definitions",
        "operationId": "getSynthesisCategories",
        "responses": {
          "200": {
            "description": "Categories retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/synthesis_categories/{id}": {
      "get": {
        "tags": [
          "Synthesis & Crafting"
        ],
        "summary": "Get synthesis recipes in a specific category",
        "description": "Retrieve synthesis recipes for a specific category (alternative endpoint)",
        "operationId": "getSynthesisCategoriesById",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Category ID (long)",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Synthesis recipes retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/pomodoro_records": {
      "get": {
        "tags": [
          "Pomodoro"
        ],
        "summary": "Get pomodoro records",
        "description": "Retrieve pomodoro timer records with pagination and optional time range filtering.\n",
        "operationId": "getPomodoroRecords",
        "parameters": [
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "description": "Number of records to skip",
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "description": "Maximum number of records to return",
            "schema": {
              "type": "integer",
              "default": 100
            }
          },
          {
            "name": "time_range_start",
            "in": "query",
            "required": false,
            "description": "Start time (milliseconds since epoch) for filtering",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "time_range_end",
            "in": "query",
            "required": false,
            "description": "End time (milliseconds since epoch) for filtering",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Pomodoro records retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/info": {
      "get": {
        "tags": [
          "Info"
        ],
        "summary": "Get LifeUp information",
        "description": "Retrieve general information about LifeUp (version, player stats, etc.)",
        "operationId": "getInfo",
        "responses": {
          "200": {
            "description": "Info retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/coin": {
      "get": {
        "tags": [
          "Coin"
        ],
        "summary": "Get coin information",
        "description": "Query current coin balance and related information",
        "operationId": "getCoinInfo",
        "responses": {
          "200": {
            "description": "Coin info retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/files/{url}": {
      "get": {
        "tags": [
          "Files"
        ],
        "summary": "Download file",
        "description": "Download a file from LifeUp using a content URI",
        "operationId": "downloadFile",
        "parameters": [
          {
            "name": "url",
            "in": "path",
            "required": true,
            "description": "Content URI of the file to download (usually content://)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "File downloaded successfully",
            "content": {
              "application/octet-stream": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "400": {
            "description": "URL parameter is required"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/files/upload": {
      "post": {
        "tags": [
          "Files"
        ],
        "summary": "Upload file",
        "description": "Upload a file to LifeUp. Returns content URIs for the uploaded files.\n",
        "operationId": "uploadFile",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "File to upload (can be specified multiple times)"
                  }
                },
                "required": [
                  "file"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "File uploaded successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "400": {
            "description": "No files received"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/data/export": {
      "get": {
        "tags": [
          "Data Management"
        ],
        "summary": "Export backup data",
        "description": "Export LifeUp data as a backup file.\nOptionally include media files.\n",
        "operationId": "exportBackup",
        "parameters": [
          {
            "name": "withMedia",
            "in": "query",
            "required": false,
            "description": "Include media files in backup",
            "schema": {
              "type": "boolean",
              "default": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Backup exported successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/data/import": {
      "post": {
        "tags": [
          "Data Management"
        ],
        "summary": "Import backup data",
        "description": "Import LifeUp data from a backup file.\nThis launches the LifeUp backup activity for user confirmation.\n",
        "operationId": "importBackup",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "Backup file (.lfbak)"
                  },
                  "description": {
                    "type": "string",
                    "description": "Optional backup description"
                  }
                },
                "required": [
                  "file"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Backup file received and BackupActivity launched",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid API token"
          },
          "400": {
            "description": "No file received"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "ApiTokenAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "Authorization",
        "description": "API token for authentication (optional).\nOnly required if configured in LifeUp settings.\nSet this header to the value configured in the app settings.\n"
      }
    },
    "schemas": {
      "HttpResponse": {
        "type": "object",
        "description": "Standard HTTP response wrapper used by all endpoints. Created by .wrapAsResponse() in KtorService.kt",
        "properties": {
          "code": {
            "type": "integer",
            "description": "Response code (200 = success, 401 = unauthorized, 500 = server error, 10002 = content provider error)",
            "example": 200
          },
          "data": {
            "description": "Response data (structure varies by endpoint, null on error)",
            "oneOf": [
              {
                "type": "object"
              },
              {
                "type": "array"
              },
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          },
          "message": {
            "type": "string",
            "description": "Response message or error description",
            "example": "success"
          }
        },
        "required": ["code", "message"]
      },
      "RawQueryVoSingleUrl": {
        "type": "object",
        "description": "Request body for single URL execution",
        "properties": {
          "url": {
            "type": "string",
            "description": "Single lifeup:// scheme URL or Content Provider query URL",
            "example": "lifeup://api/reward?type=coin&content=Test&number=100"
          }
        },
        "required": [
          "url"
        ]
      },
      "RawQueryVoMultipleUrls": {
        "type": "object",
        "description": "Request body for multiple URL execution",
        "properties": {
          "urls": {
            "type": "array",
            "description": "Array of lifeup:// scheme URLs or Content Provider query URLs",
            "items": {
              "type": "string"
            },
            "example": [
              "lifeup://api/reward?type=coin&content=Test1&number=100",
              "lifeup://api/reward?type=coin&content=Test2&number=50"
            ]
          }
        },
        "required": [
          "urls"
        ]
      },
      "CallUrlResult": {
        "type": "object",
        "description": "Result of a single URL execution",
        "properties": {
          "url": {
            "type": "string",
            "description": "The URL that was executed"
          },
          "result": {
            "description": "Result data from the query",
            "oneOf": [
              {
                "type": "object"
              },
              {
                "type": null
              }
            ]
          }
        }
      },
      "Task": {
        "type": "object",
        "description": "Task object from LifeUp Content Provider",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64",
            "description": "Unique task identifier"
          },
          "gid": {
            "type": "integer",
            "format": "int64",
            "description": "Group identifier for task grouping"
          },
          "name": {
            "type": "string",
            "description": "Task name"
          },
          "nameExtended": {
            "type": "string",
            "description": "Extended task name",
            "nullable": true
          },
          "content": {
            "type": "string",
            "description": "Task description/content",
            "nullable": true
          },
          "notes": {
            "type": "string",
            "description": "Additional notes for the task",
            "nullable": true
          },
          "words": {
            "type": "string",
            "description": "Additional text field",
            "nullable": true
          },
          "status": {
            "type": "integer",
            "description": "Task status code (0=active, 1=completed, 2=other)"
          },
          "exp": {
            "type": "integer",
            "description": "Experience points reward"
          },
          "coin": {
            "type": "integer",
            "description": "Base coin reward"
          },
          "coinVariable": {
            "type": "integer",
            "description": "Variable coin reward component"
          },
          "skill_id": {
            "type": "integer",
            "format": "int64",
            "description": "Primary associated skill ID",
            "nullable": true
          },
          "skillIds": {
            "type": "array",
            "description": "Array of all associated skill IDs",
            "items": {
              "type": "integer",
              "format": "int64"
            }
          },
          "itemId": {
            "type": "integer",
            "format": "int64",
            "description": "Associated item ID",
            "nullable": true
          },
          "items": {
            "type": "array",
            "description": "Associated items",
            "items": {
              "type": "object"
            }
          },
          "subTasks": {
            "type": "array",
            "description": "Array of subtask objects",
            "items": {
              "$ref": "#/components/schemas/SubTask"
            }
          },
          "startTime": {
            "type": "integer",
            "format": "int64",
            "description": "Start time timestamp (milliseconds since epoch)"
          },
          "deadline": {
            "type": "integer",
            "format": "int64",
            "description": "Deadline timestamp (milliseconds since epoch)",
            "nullable": true
          },
          "due_date": {
            "type": "integer",
            "format": "int64",
            "description": "Due date timestamp (milliseconds since epoch, alias for deadline)",
            "nullable": true
          },
          "endTime": {
            "type": "integer",
            "format": "int64",
            "description": "End time timestamp (milliseconds since epoch)",
            "nullable": true
          },
          "remindTime": {
            "type": "integer",
            "format": "int64",
            "description": "Reminder time timestamp (milliseconds since epoch)",
            "nullable": true
          },
          "created_time": {
            "type": "integer",
            "format": "int64",
            "description": "Creation timestamp (milliseconds since epoch)"
          },
          "update_time": {
            "type": "integer",
            "format": "int64",
            "description": "Last update timestamp (milliseconds since epoch)"
          },
          "frequency": {
            "type": "integer",
            "description": "Repeat frequency code (0=never, 1=daily, etc.)"
          },
          "categoryId": {
            "type": "integer",
            "format": "int64",
            "description": "Category/list ID this task belongs to"
          },
          "order": {
            "type": "integer",
            "description": "Display order within category"
          }
        },
        "required": ["id", "gid", "name", "status", "created_time"]
      },
      "Item": {
        "type": "object",
        "description": "Shop item object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64",
            "description": "Item unique identifier"
          },
          "name": {
            "type": "string",
            "description": "Item name"
          },
          "desc": {
            "type": "string",
            "description": "Item description",
            "nullable": true
          },
          "icon": {
            "type": "string",
            "description": "Icon content URI or path",
            "nullable": true
          },
          "price": {
            "type": "integer",
            "description": "Price in coins"
          },
          "category_id": {
            "type": "integer",
            "format": "int64",
            "description": "Item category/list ID"
          },
          "stockNumber": {
            "type": "integer",
            "description": "Total stock quantity (-1 for unlimited)"
          },
          "ownNumber": {
            "type": "integer",
            "description": "Quantity owned by user"
          },
          "disablePurchase": {
            "type": "boolean",
            "description": "Whether purchase is disabled for this item"
          },
          "maxPurchaseNumber": {
            "type": "integer",
            "description": "Maximum purchase limit per transaction (-1 for unlimited)"
          },
          "order": {
            "type": "integer",
            "description": "Display order in list"
          }
        },
        "required": ["id", "name", "price"]
      },
      "Skill": {
        "type": "object",
        "description": "Skill object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64",
            "description": "Skill unique identifier"
          },
          "name": {
            "type": "string",
            "description": "Skill name"
          },
          "description": {
            "type": "string",
            "description": "Skill description (deprecated, use desc)",
            "nullable": true
          },
          "desc": {
            "type": "string",
            "description": "Skill description",
            "nullable": true
          },
          "icon": {
            "type": "string",
            "description": "Icon content URI or path",
            "nullable": true
          },
          "level": {
            "type": "integer",
            "description": "Current skill level"
          },
          "experience": {
            "type": "integer",
            "description": "Total accumulated experience points"
          },
          "currentLevelExp": {
            "type": "integer",
            "description": "Experience points earned at current level"
          },
          "untilNextLevelExp": {
            "type": "integer",
            "description": "Experience points needed to reach next level"
          },
          "next_level_exp": {
            "type": "integer",
            "description": "Total experience required for next level (deprecated, use untilNextLevelExp)"
          },
          "color": {
            "type": "integer",
            "description": "Skill color value (ARGB format)",
            "nullable": true
          },
          "order": {
            "type": "integer",
            "description": "Display order"
          },
          "type": {
            "type": "integer",
            "description": "Skill type code"
          }
        },
        "required": ["id", "name", "level", "experience"]
      },
      "SubTask": {
        "type": "object",
        "description": "Subtask within a parent task",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64",
            "description": "Subtask unique identifier"
          },
          "gid": {
            "type": "integer",
            "format": "int64",
            "description": "Group identifier"
          },
          "todo": {
            "type": "string",
            "description": "Subtask description/name"
          },
          "status": {
            "type": "integer",
            "description": "Subtask status code (0=incomplete, 1=complete)"
          },
          "remindTime": {
            "type": "integer",
            "format": "int64",
            "description": "Reminder timestamp (milliseconds since epoch)",
            "nullable": true
          },
          "exp": {
            "type": "integer",
            "description": "Experience points reward"
          },
          "coin": {
            "type": "integer",
            "description": "Coin reward"
          },
          "coinVariable": {
            "type": "integer",
            "description": "Variable coin reward component"
          },
          "items": {
            "type": "array",
            "description": "Associated items",
            "items": {
              "type": "object"
            }
          },
          "order": {
            "type": "integer",
            "description": "Display order"
          },
          "autoUseItem": {
            "type": "boolean",
            "description": "Whether to automatically use associated items"
          }
        }
      },
      "Category": {
        "type": "object",
        "description": "Generic category object used for tasks, items, achievements, and synthesis category lists",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64",
            "description": "Category unique identifier"
          },
          "name": {
            "type": "string",
            "description": "Category name"
          },
          "isAsc": {
            "type": "boolean",
            "description": "Ascending sort order flag"
          },
          "sort": {
            "type": "string",
            "description": "Sort field name",
            "nullable": true
          },
          "filter": {
            "type": "string",
            "description": "Filter criteria",
            "nullable": true
          },
          "order": {
            "type": "integer",
            "description": "Display order"
          },
          "status": {
            "type": "integer",
            "description": "Category status code",
            "nullable": true
          },
          "type": {
            "type": "integer",
            "description": "Category type code",
            "nullable": true
          },
          "desc": {
            "type": "string",
            "description": "Category description",
            "nullable": true
          },
          "iconUri": {
            "type": "string",
            "description": "Icon content URI or path",
            "nullable": true
          }
        },
        "required": ["id", "name"]
      },
      "Feeling": {
        "type": "object",
        "description": "Feelings/emotions log entry",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64",
            "description": "Feeling record unique identifier"
          },
          "content": {
            "type": "string",
            "description": "Feeling/emotion description or notes"
          },
          "isFav": {
            "type": "boolean",
            "description": "Whether marked as favorite"
          },
          "title": {
            "type": "string",
            "description": "Feeling title/mood label"
          },
          "time": {
            "type": "integer",
            "format": "int64",
            "description": "Record timestamp (milliseconds since epoch)"
          },
          "attachments": {
            "type": "array",
            "description": "Attached files or images",
            "items": {
              "type": "object"
            }
          },
          "type": {
            "type": "integer",
            "description": "Feeling type/mood code"
          }
        }
      },
      "Synthesis": {
        "type": "object",
        "description": "Synthesis/crafting recipe object (schema incomplete - endpoint returns empty array in testing)",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64",
            "description": "Recipe unique identifier"
          },
          "name": {
            "type": "string",
            "description": "Recipe name"
          }
        }
      },
      "PomodoroRecord": {
        "type": "object",
        "description": "Pomodoro timer session record (schema incomplete - endpoint returns empty array in testing)",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64",
            "description": "Record unique identifier"
          },
          "startTime": {
            "type": "integer",
            "format": "int64",
            "description": "Session start timestamp (milliseconds since epoch)"
          },
          "duration": {
            "type": "integer",
            "description": "Actual duration in milliseconds"
          }
        }
      },
      "Achievement": {
        "type": "object",
        "description": "Achievement object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "category_id": {
            "type": "integer",
            "format": "int64"
          },
          "progress": {
            "type": "integer"
          },
          "target": {
            "type": "integer"
          },
          "is_unlocked": {
            "type": "boolean"
          }
        }
      }
    }
  }
}